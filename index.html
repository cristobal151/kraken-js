<!DOCTYPE html>
<!-- tap -->
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en-US"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang="en-US"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en-US"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>KrakenJS Suite</title>
    <meta name="description" content="Homepage for the KrakenJS Suite">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" type="image/ico" href="favicon.ico">
    <script src="js/vendor/google-code-prettify/prettify.js"></script>
    <script src="js/vendor/google-code-prettify/lang-css.js"></script>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="js/vendor/google-code-prettify/sons-of-obsidian.css">
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>

</head>
<body data-spy="scroll" data-target="#staticMenuNav">

<header role="banner">
    <div class="wrapper">
        <nav role="navigation">
            <ul>
                <li class="kraken"><a href="#" title="Home">
                    <div class="hex2">
                        <div aria-label="KrakenJS">K</div>
                    </div>
                </a></li>
                <li><a href="#Quick">Get Started</a></li>
                <li><a href="https://github.com/PayPal/kraken-js#kraken">Documentation</a></li>
                <li><a href="#Examples">Examples</a></li>
                <li><a href="https://github.com/PayPal/kraken-js">GitHub</a></li>
                <li><a href="http://paypal.github.io" target="_blank"><img src="img/OSSLogo.png"
                                                                           alt="PayPal Open Source"></a></li>
            </ul>
        </nav>
    </div>
</header>
<main role="main">
<div id="MainBlock">
    <div class="wrapper">

        <div id="Intro">
            <div id="MainLogo" class="mainLogo"></div>
            <div id="IntroText">

                <img src="img/TextLogo@High.png" alt="KrakenJS" height="65">

                <h1>The kraken suite is a secure and scalable layer that extends express by providing structure and convention.</h1>

                <div class="download">
                    <a href="#Quick">
                        Get Started
                    </a>
                </div>
                <div>
                    <a title="Build Status" href="https://travis-ci.org/paypal/kraken-js"><img
                            src="https://travis-ci.org/paypal/kraken-js.png" alt="Build Status"></a>
                    <a title="Current Version" href="http://badge.fury.io/js/kraken-js"><img src="https://badge.fury.io/js/kraken-js.png" alt="Current Version"></a>

                </div>


            </div>
        </div>
    </div>
    <div id="Rocks">
        &nbsp;
        <div class="bottom">&nbsp;</div>
    </div>
    <div id="Tentacle">&nbsp;</div>
</div>

<div id="InfoBlock">
    <div class="wrapper">
        <h2>The kraken suite</h2>

        <p>
            Kraken is the main pillar of the framework, but the following modules can also be used independently.
        </p>

        <div id="modules">
            <ul>
                <li class="lusca">
                    <img src="img/Lusca.png" alt="">

                    <div class="moduleTitle">Lusca</div>
                    <a href="http://github.com/paypal/lusca">Application security</a>
                </li>
                <li class="makara">
                    <img src="img/Makara.png" alt="">

                    <div class="moduleTitle">Makara</div>
                    <a href="http://github.com/paypal/makara">Internationalization</a>
                </li>
                <li class="adaro">
                    <img src="img/Adaro.png" alt="">

                    <div class="moduleTitle">Adaro</div>
                    <a href="http://github.com/paypal/adaro">Dust-js Support</a>
                </li>
                <li class="kappa">
                    <img src="img/Kappa.png" alt="">

                    <div class="moduleTitle">Kappa</div>
                    <a href="http://github.com/paypal/kappa">NPM Proxy</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="wrapper">
        <hr>

        <div>
            <p>Additional dependencies, tools and utilities for the kraken suite.</p>

            <div id="cast">
                <ul>

                    <li class="generator">
                        <a target="_blank" href="http://github.com/paypal/generator-kraken">
                            <div class="hex2">
                                <div aria-label="Generator-Kraken">G</div>
                            </div>
                        </a>

                        <div class="info">
                            <strong>Generator</strong>

                            <p>
                                A Yeoman generator for kraken projects
                            </p>
                        </div>
                    </li>
                    <li target="_blank" class="enrouten">
                        <a href="http://github.com/paypal/express-enrouten">
                            <div class="hex2">
                                <div aria-label="Enrouten">E</div>
                            </div>
                        </a>

                        <div class="info">
                            <strong>Enrouten</strong>

                            <p>
                                Route configuration middleware for expressjs.
                            </p>
                        </div>
                    </li>

                    <li target="_blank" class="webtools">
                        <a href="http://github.com/paypal/kraken-devtools">
                            <div class="hex2">
                                <div aria-label="Kraken-Devtools">D</div>
                            </div>
                        </a>

                        <div class="info">
                            <strong>DevTools</strong>

                            <p>
                                Development-time tools for kraken applications.
                            </p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <hr>
        <div>
            <a href="https://twitter.com/kraken_js" class="twitter-follow-button" data-show-count="false">Follow @kraken_js</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>
    </div>
</div>
<div class="docs">
<div class="wrapper">
<h2 id="Docs">Getting started with kraken</h2>

<div class="staticMenu" id="staticMenuNav" aria-label="Documentation Menu"></div>
<div class="docsContent">
<section aria-labelledby="QuickStart">
    <h3 id="QuickStart">Quick Start</h3>
    <ol>
        <li><h4>Install the generator</h4>

            <p>
                Start by installing the generator <strong>globally</strong> using <strong>npm</strong>:
                <br><code>sudo npm install -g generator-kraken</code>
                <br><small>Note: You need <a href="http://nodejs.org/">NodeJS</a> version 0.10.24 or higher installed</small>
            </p>
        </li>
        <li><h4>Create a project</h4>

            <p>
                Once installed, you can create a basic project using the generator. Type <code>yo kraken</code> and
                follow the prompts:
            </p>
    <pre class="prettyprint lang-html">
$ yo kraken

     ,'""`.
    / _  _ \
    |(@)(@)|   Release the Kraken!
    )  __  (
   /,'))((`.\
  (( ((  )) ))
   `\ `)(' /'

[?] Application name: HelloWorld
[?] Description: A test kraken application
[?] Author: YourName GoesHere
[?] Use RequireJS? (Y/n)</pre>


            <p>
                The generator will create a new directory for your application (Based on your answer to the first
                question),
                set up an empty project and download all the necessary dependencies.
            </p>
        </li>
        <li><h4>Start your server</h4>

            <p>To run your project, just go into the newly created directory and type
                <code>npm start</code>
            </p>
        <pre class="prettyprint lang-html">
$ cd HelloWorld
$ npm start

> helloworld@0.0.1 start ~/HelloWorld
> node index.js

Listening on 8000</pre>
            <p>
                Your kraken application will start up on port 8000. You can visit it at
                <a target="_blank" href="http://localhost:8000">http://localhost:8000</a>.
                If all goes well, your very polite application will say hello.
            </p>
        </li>
    </ol>
</section>

<section aria-labelledby="Structure">
    <h3 id="Structure">Structure of a Project</h3>

    <p>
        Kraken keeps your code organized by splitting up the configuration, content+templates and routing
        logic into different places so that it's easy to keep track of everything and to easily swap out
        components.

        Let's start by looking at the base structure of the project you just created:
    </p>
    <h4>Structure of a kraken project</h4>
<pre class="prettyprint lang-html">
/config
Application and middleware configuration

/controllers
Routes and logic

/lib
Custom developer libraries and other code

/locales
Language specific content bundles

/models
Models

/public
Web resources that are publicly available

/public/templates
Server and browser-side templates

/tests
Unit and functional test cases

index.js
Application entry point </pre>

    <p>
        Let's say you want to create a simple application. As your application
        grows, this becomes unmanageable and messy. Kraken helps you stay organized by
        imposing a sound structure and strategy.
    </p>

    <p>
        First let's look at our basic
        <code>index.js</code> entry point:
    </p>
                <pre class="prettyprint linenums">
'use strict';

var kraken = require('kraken-js'),
    app = {};

// Fired when an app configures itself
app.configure = function (nconf, next) {
    next();
};

// Fired at the beginning of an incoming request
app.requestStart = function (server) { };

// Fired before routing occurs
app.requestBeforeRoute = function (server) { };

// Fired after routing occurs
app.requestAfterRoute = function requestAfterRoute(server) { };

kraken.create(app).listen(function (err) {
    if (err) {
        console.error(err.stack);
    }
});</pre>
    <p>
        As you can see, the entry point simply provides hooks for configuration, and request-specific
        functionality
        that is called at the start of the request, as well as before and after the routing takes place.
        See the <a href="https://github.com/lensam69/Kraken_Example_Custom_Middleware/">Requests Served</a> example to get a better understanding of how these work.
    </p>

    <p>
        So, where's all the configuration? Where are the routes?
    </p>
</section>
<section aria-labelledby="Configuration">
    <h3 id="Configuration">Configuration</h3>

    <p>
        Kraken's configuration can be found in the <code>/config/app.json</code> file.
    </p>

    <p>
        This json file contains key value pairs that are loaded at runtime. The advantage of this is that all your
        application configuration is in a single, well-known place;
        and you can swap it out without having to touch a single line of code.
    </p>
    <h4>Development vs Production environments</h4>

    <p>
        A common scenario is that development environments have slightly different parameters than
        production
        (e.g.: Port numbers, host names, etc). Kraken allows you to define a second file <code>./config/app-development.json</code>
        with alternate values.
    </p>

    <p>
        You can control which file is loaded by defining an environment variable: <code>NODE_ENV</code> and
        setting its value to <code>production</code> or <code>development</code> as appropriate.
    </p>

</section>
<section aria-labelledby="Security">
    <h3 id="Security">Security</h3>

    <p>
        Security is provided out-of-the-box by the <a href="http://github.com/paypal/lusca">Lusca</a> module.
        Lusca is middleware for express, and it follows <a href="http://www.owasp.org">OWASP</a> best practices
        by enabling the following request/response headers for all calls:
    </p>
    <ul>
        <li><a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)">Cross Site Request Forgery</a>
            (CSRF) headers.
        </li>
        <li><a href="https://www.owasp.org/index.php/Content_Security_Policy"> Content Security Policy </a> (CSP)
            headers.
        </li>
        <li><a href="http://support.microsoft.com/kb/290333"> Platform for Privacy Preferences Project</a> (P3P)
            headers.
        </li>
        <li><a href="https://www.owasp.org/index.php/Clickjacking"> X-FRAME-OPTIONS</a> to prevent clickjacking</li>
    </ul>

    <p>
        If you want to disable or configure them, please see the Lusca <a
            href="http://github.com/paypal/lusca">Readme</a>
    </p>
</section>
<section aria-labelledby="Routes">
    <h3 id="Routes">Routes</h3>

    <p>
        Kraken moves the routing logic into separate files in the <code>./controllers/</code> folder, allowing you to
        group routes by functionality.
    </p>

    <p>
        For example, a route for your home page, would use a
        <code>./controllers/index.js</code> file that looks as follows:
    </p>
                <pre class="prettyprint linenums">
'use strict';
var IndexModel = require('../models/index');
module.exports = function (server) {
    var model = new IndexModel();

    server.get('/', function (req, res) {
        res.render('index', model);
    });
};</pre>
    <p>This file would define the routes and the logic for the home page. The advantage of keeping routes and logic
        segregated in individual files starts to show as the application grows. If something fails, it's very easy
        to pinpoint where things went wrong.
    </p>

    <p>
        Kraken is built on top of express, so the rest of the logic should be familiar to Node developers</p>
</section>
<section aria-labelledby="Models">
    <h3 id="Models">Models</h3>

    <p>
        Kraken also separates data models from the controller logic, resulting in cleaner, more organized code. Data
        models live in the <code>./models/</code> folder.
    </p>

    <p>
        When a new controller is created, the framework will also create a simple model for you.
    </p>
    <pre class="prettyprint linenums">
'use strict';
module.exports = function IndexModel() {
    return {
        name: 'myApp'
    };
};</pre>
    <p>
        While not very complex, this model serves as a base to build upon. See the  <a target="_blank" href="https://github.com/lmarkus/Kraken_Example_Shopping_Cart">Kraken Shopping Cart</a> example
        for more complex usage of models.
    </p>

</section>
<section aria-labelledby="Templates">
    <h3 id="Templates">Templates</h3>

    <p>
        Kraken uses LinkedIn's <a href="http://linkedin.github.io/dustjs/">Dust</a> as the templating language of
        choice (This can be changed by the user if desired). <a href="http://github.com/paypal/adaro">Adaro</a> is the module
        responsible for rendering and managing the templates.
    </p>

    <p>
        Templates are loaded from the <code>./public/templates/</code> directory. Because they reside in the public
        folder, this allows kraken to use the same templates on the server side as well as the client side, allowing you
        to reuse code.
    </p>

    <p>
        If we wanted to greet our customers, a basic template would be:
    </p>
    <pre class="prettyprint lang-html">&lt;h1&gt;Hello {name}!&lt;/h1&gt;</pre>

</section>
<section aria-labelledby="Localization">
    <h3 id="Localization">Localization</h3>

    <p>
        Thanks to <a href="http://github.com/paypal/makara">Makara</a>, kraken has
        the ability to load content bundles on the fly, based on the request context. If we wanted to greet a
        user in their native language (e.g.: Spanish), we can simply add this context to the response before rendering
        the template:
    </p>
    <pre class="prettyprint">
var customerLocality = 'es_ES';
res.locals.context = {locality: customerLocality};
var model = {name: 'Antonio Banderas'};
res.render('index',model);</pre>
    <p>
        We would also change our template as follows, using a <code>@pre content</code> tag:
    </p>
    <pre class="prettyprint lang-html">&lt;h1&gt;{@pre type="content" key="index.greeting"/}&lt;/h1&gt;</pre>
    <p>
        This instructs the framework to pick up the index.greeting string from one of the locale content bundles.
    </p>

    <p>
        The <code>locales/</code> directory holds these bundles, organized by country and language. The bundles are
        nothing more than
        simple key=value .property files. If our sample application caters to English and Spanish speakers, we would
        create two bundles:
    </p>

    <p>
        <code>locales/<strong>US/en/</strong>index.properties</code>
        <br> to hold <br>
        <code>index.greeting=Hello {name}!</code>

        <br>and<br>

        <code>locales/<strong>ES/es/</strong>index.properties</code>
        <br> to hold <br>
        <code>index.greeting=Hola {name}!</code>
    </p>

    <p>
        So, in the above example, since the locality is set to <code>es_ES</code>, the framework would pick the second
        bundle, and display:
    </p>
    <pre class="prettyprint">Hola Antonio Banderas!</pre>

</section>
<section aria-labelledby="Documentation">
    <h3 id="Documentation">Documentation</h3>

    <p>
        To view the full documentation please visit <a href="http://github.com/paypal/kraken-js">kraken</a> on GitHub
    </p>

    <p>
        The Kraken wants to be your friend. Show your love by liking us on GitHub</p>
        <iframe src="http://ghbtns.com/github-btn.html?user=PayPal&repo=kraken-js&type=watch&count=true"
                allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>


        <iframe src="http://ghbtns.com/github-btn.html?user=PayPal&repo=kraken-js&type=fork&count=true"
                allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>


</section>

<section aria-labelledby="FAQ">
    <h3 id="FAQ">FAQ</h3>
    <ul>
        <li>
            <h4>How can I contribute to this project?</h4>

            <p>Bugs and new features should be submitted using <a href="https://github.com/PayPal/kraken-js/issues/new">Github
                issues</a>. Please include with a detailed description and the expected behaviour. If you would like to
                submit a change yourself do the following steps.</p>

            <ol>
                <li>Fork it.</li>
                <li>Create a feature branch.</li>
                <li>Commit a test that fails due to the bug.</li>
                <li>Commit a fix that makes the test pass.</li>
                <li>Open a <a href="https://github.com/PayPal/kraken-js/pulls">Pull Request.</a>
                </li>
            </ol>
            <p>Please keep your branch up to date by rebasing upstream changes from master.</p>
        </li>

        <li>
            <h4>There is a typo on this page!</h4>
            <p>That's not a question, but good catch! This page is built from the <a href="https://github.com/paypal/kraken-js/tree/gh-pages">gh-pages</a> branch of the
                <a href="https://github.com/PayPal/kraken-js">kraken repository</a>.
                You can <a href="https://github.com/paypal/kraken-js/issues/new">let us know about it</a>, or better yet,
                send us a  <a href="https://github.com/PayPal/kraken-js/issues/new">pull request</a>.
            </p>
        </li>
    </ul>

</section>
<section aria-labeledby="Examples" class="examples">
    <h3 id="Examples">Examples</h3>
    <p>
        Here's a few examples to get you going with kraken:
    </p>
    <ul>
        <li>
            <a target="_blank" href="https://github.com/lmarkus/Kraken_Example_Shopping_Cart">Kraken Shopping Cart</a>
            <p>An end-to-end example showing how to build a shopping cart that integrates with PayPal</p>
        </li>
        <li>
            <a target="_blank" href="https://github.com/lmarkus/Kraken_Example_Passport">Kraken Passport Integration</a>
            <p>Authenticate and securely store user credentials using Passport, Mongo and bcrypt</p>
        </li>
        <li>
            <a target="_blank" href="https://github.com/lensam69/Kraken_Example_Localization">Localization and Internationalization</a>
            <p>Greet users in different languages (Including Klingon!). Shows support for localized content bundles.</p>
        </li>
        <li>
            <a target="_blank" href="https://github.com/lmarkus/Kraken_Example_Date_Format_Helper">Custom Dustjs Helper</a>
            <p>Format dates painlessly in your dust templates by writing a custom helper. Includes localization support.</p>
        </li>
        <li>
            <a target="_blank" href="https://github.com/lmarkus/Kraken_Example_Layouts">Dynamic Layouts</a>
            <p>Easily switch between different layouts, making your application skinnable.</p>
        </li>
        <li>
            <a target="_blank" href="https://github.com/lmarkus/Kraken_Example_Configuration">Custom configuration</a>
            <p>Shows how to use kraken's configuration files, and how to retrieve the values stored there.</p>
        </li>
        <li>
            <a target="_blank" href="https://github.com/lensam69/Kraken_Example_Custom_Middleware">Deploying middleware</a>
            <p>Create a custom page counter. Explains how and when middleware is deployed in the application lifecycle.</p>
        </li>
    </ul>
    <h3>Community contributed examples</h3>

    <p>We're happy to accept examples and tutorials created by you! </p>
    <ul>
        <li>
            <a target="_blank" href="https://github.com/AlexSantos/Kraken_Example_Session_Redis">Using Redis as a session store</a>
            <p>Shows how to change kraken's default memory session store for something more robust and scalable.</p>
            <div class="author">Contributed by: <a href="https://twitter.com/ajvsms">@ajvsms</a></div>
        </li>
        <li>
            <a target="_blank" href="https://github.com/AlexSantos/Kraken_Example_Bootstrap">Using Bootstrap in your application</a>
            <p>Shows how to set up <a href="http://getbootstrap.com">Bootstrap</a> and a few basic components in a Kraken App.</p>
            <div class="author">Contributed by: <a href="https://twitter.com/ajvsms">@ajvsms</a></div>
        </li>

    </ul>
</section>
</div>
</div>
</div>
</main>
<footer role="contentinfo">
    <div class="wrapper">
        Designed with ❤ and care at <a href="http://www.paypal.com" alt="PayPal">PayPal</a><br>
        Code Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0.html" alt="Apache License.">Apache
        License v2.0</a>.<br>
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />Documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a>.
    </div>
</footer>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="js/plugins.js"></script>
<script src="js/vendor/bootstrap.scrollspy.js"></script>
<script src="js/main.js"></script>

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-45342705-1', 'krakenjs.com');
    ga('send', 'pageview');
</script>
</body>
</html>
